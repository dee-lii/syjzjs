# ğŸ’° VPS å‰©ä½™ä»·å€¼è®¡ç®—å™¨

ä¸€ä¸ªè½»é‡çº§çš„ Web åº”ç”¨ï¼Œç”¨äºè®¡ç®—ä¸åŒä»˜æ¬¾å‘¨æœŸï¼ˆæœˆä»˜/å¹´ä»˜/ä¸¤å¹´ä»˜/ä¸‰å¹´ä»˜ï¼‰VPS æœåŠ¡å™¨çš„å½“å‰å‰©ä½™ä»·å€¼ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **ç²¾ç¡®è®¡ç®—**ï¼šåŸºäºçº¿æ€§æŠ˜æ—§æ¨¡å‹è®¡ç®—å‰©ä½™ä»·å€¼
- ğŸ’± **å¤šè´§å¸æ”¯æŒ**ï¼šæ”¯æŒ CNYã€USDã€EURã€GBPã€JPY äº”ç§è´§å¸
- ğŸ”„ **å®æ—¶æ±‡ç‡è½¬æ¢**ï¼šè‡ªåŠ¨è·å–æœ€æ–°æ±‡ç‡è¿›è¡Œè´§å¸è½¬æ¢
- ğŸ–¼ï¸ **SVG å¾½ç« ç”Ÿæˆ**ï¼šç”Ÿæˆå¯åµŒå…¥çš„ç²¾ç¾å¾½ç« å›¾ç‰‡
- ğŸ“Š **å¤šå‘¨æœŸæ”¯æŒ**ï¼šæœˆä»˜ï¼ˆ30å¤©ï¼‰ã€å¹´ä»˜ï¼ˆ365å¤©ï¼‰ã€ä¸¤å¹´ä»˜ï¼ˆ730å¤©ï¼‰ã€ä¸‰å¹´ä»˜ï¼ˆ1095å¤©ï¼‰
- ğŸ¨ **ç¾è§‚ç•Œé¢**ï¼šæ¸å˜è‰²è®¾è®¡ï¼Œå“åº”å¼å¸ƒå±€ï¼Œç§»åŠ¨ç«¯å‹å¥½
- ğŸš€ **å•æ–‡ä»¶å‰ç«¯**ï¼šæ— éœ€æ„å»ºå·¥å…·ï¼Œæ‰€æœ‰èµ„æºå†…è”åœ¨å•ä¸ª HTML æ–‡ä»¶ä¸­
- ğŸ³ **Docker éƒ¨ç½²**ï¼šä¸€é”®æ„å»ºå’Œè¿è¡Œ
- ğŸ§ª **å®Œæ•´æµ‹è¯•**ï¼šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¦†ç›–ç‡ 100%

> ğŸ“ **v2.0 æ›´æ–°**ï¼šæ–°å¢å¤šè´§å¸æ”¯æŒã€å®æ—¶æ±‡ç‡è½¬æ¢å’Œ SVG å¾½ç« ç”ŸæˆåŠŸèƒ½ï¼è¯¦è§ [UPDATE.md](UPDATE.md)

## ğŸ“¸ é¢„è§ˆ

è®¿é—® `http://localhost:3000` æŸ¥çœ‹è®¡ç®—å™¨ç•Œé¢ï¼š

- è¾“å…¥è´­ä¹°ä»·æ ¼ã€é€‰æ‹©è´§å¸å•ä½ã€è´­ä¹°æ—¥æœŸã€ä»˜æ¬¾å‘¨æœŸ
- å®æ—¶è®¡ç®—å‰©ä½™ä»·å€¼ã€å·²ä½¿ç”¨ä»·å€¼ã€æ¯æ—¥æˆæœ¬
- å¯è§†åŒ–è¿›åº¦æ¡å±•ç¤ºä½¿ç”¨ç‡
- å®æ—¶æ±‡ç‡è½¬æ¢åˆ°å…¶ä»–è´§å¸
- ä¸€é”®ç”Ÿæˆåˆ†äº«å¾½ç« å’Œ Markdown ä»£ç 

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šæœ¬åœ°è¿è¡Œï¼ˆNode.jsï¼‰

#### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

#### 2. å¯åŠ¨æœåŠ¡

```bash
npm start
```

#### 3. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`

### æ–¹å¼äºŒï¼šDocker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. æ„å»º Docker é•œåƒ

```bash
docker build -t vps-calculator:latest .
```

#### 2. è¿è¡Œå®¹å™¨

```bash
docker run -d \
  --name vps-calculator \
  -p 3000:3000 \
  vps-calculator:latest
```

#### 3. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:3000`

### æ–¹å¼ä¸‰ï¼šDocker Composeï¼ˆæœ€ç®€å•ï¼‰

#### 1. ä¸€é”®å¯åŠ¨

```bash
docker-compose up -d
```

#### 2. æŸ¥çœ‹æ—¥å¿—

```bash
docker-compose logs -f
```

#### 3. åœæ­¢æœåŠ¡

```bash
docker-compose down
```

## ğŸ“¡ API æ–‡æ¡£

### 1. å¥åº·æ£€æŸ¥

**è¯·æ±‚**ï¼š
```http
GET /api/health
```

**å“åº”**ï¼š
```json
{
  "status": "ok",
  "timestamp": "2026-01-11T04:00:00.000Z",
  "uptime": 12345.678
}
```

### 2. è®¡ç®—å‰©ä½™ä»·å€¼ï¼ˆåŸºç¡€ï¼‰

**è¯·æ±‚**ï¼š
```http
POST /api/calculate
Content-Type: application/json

{
  "totalCost": 365,
  "totalDays": 365,
  "usedDays": 100
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "remainingValue": 265.0,
    "usedValue": 100.0,
    "remainingDays": 265,
    "usageRate": 27.4,
    "dailyRate": 1.0
  }
}
```

### 3. è®¡ç®—å‰©ä½™ä»·å€¼ï¼ˆé€šè¿‡å‘¨æœŸï¼‰

**è¯·æ±‚**ï¼š
```http
POST /api/calculate-by-cycle
Content-Type: application/json

{
  "totalCost": 365,
  "cycle": "yearly",
  "purchaseDate": "2025-01-01"
}
```

**å‚æ•°è¯´æ˜**ï¼š
- `totalCost`ï¼šè´­ä¹°ä»·æ ¼ï¼ˆå…ƒï¼‰
- `cycle`ï¼šä»˜æ¬¾å‘¨æœŸï¼Œå¯é€‰å€¼ï¼š
  - `monthly`ï¼šæœˆä»˜ï¼ˆ30å¤©ï¼‰
  - `yearly`ï¼šå¹´ä»˜ï¼ˆ365å¤©ï¼‰
  - `biennial`ï¼šä¸¤å¹´ä»˜ï¼ˆ730å¤©ï¼‰
  - `triennial`ï¼šä¸‰å¹´ä»˜ï¼ˆ1095å¤©ï¼‰
- `purchaseDate`ï¼šè´­ä¹°æ—¥æœŸï¼ˆæ ¼å¼ï¼šYYYY-MM-DDï¼‰

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "remainingValue": 265.0,
    "usedValue": 100.0,
    "remainingDays": 265,
    "usageRate": 27.4,
    "dailyRate": 1.0,
    "totalDays": 365,
    "usedDays": 100,
    "purchaseDate": "2025-01-01",
    "cycle": "yearly"
  }
}
```

### 4. æ±‡ç‡è½¬æ¢

**è¯·æ±‚**ï¼š
```http
GET /api/exchange-rate?from=CNY&to=USD
```

**å‚æ•°è¯´æ˜**ï¼š
- `from`ï¼šæºè´§å¸ï¼ˆé»˜è®¤ï¼šUSDï¼‰
- `to`ï¼šç›®æ ‡è´§å¸ï¼ˆé»˜è®¤ï¼šCNYï¼‰
- æ”¯æŒçš„è´§å¸ï¼šUSD, CNY, EUR, GBP, JPY

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "base": "CNY",
    "target": "USD",
    "rate": 0.143,
    "timestamp": "2026-01-11T04:33:17.147Z"
  }
}
```

### 5. SVG å¾½ç« ç”Ÿæˆ

**è¯·æ±‚**ï¼š
```http
GET /api/badge.svg?startDate=2025-11-01&endDate=2026-11-01&currency=CNY&remainingValue=294&totalCost=365
```

**å‚æ•°è¯´æ˜**ï¼š
- `startDate`ï¼šè´­ä¹°æ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- `endDate`ï¼šåˆ°æœŸæ—¥æœŸï¼ˆYYYY-MM-DDï¼‰
- `currency`ï¼šè´§å¸å•ä½ï¼ˆCNY/USD/EUR/GBP/JPYï¼‰
- `remainingValue`ï¼šå‰©ä½™ä»·å€¼
- `totalCost`ï¼šæ€»æˆæœ¬

**å“åº”**ï¼š
- Content-Type: `image/svg+xml`
- è¿”å› SVG å›¾ç‰‡ï¼ˆ280x120 åƒç´ ï¼‰
- åŒ…å«ï¼šæ—¥æœŸèŒƒå›´ã€å‰©ä½™ä»·å€¼ã€ä½¿ç”¨è¿›åº¦æ¡

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```markdown
![VPS å‰©ä½™ä»·å€¼](http://localhost:3000/api/badge.svg?startDate=2025-11-01&endDate=2026-11-01&currency=CNY&remainingValue=294&totalCost=365)
```

## ğŸ“ è®¡ç®—å…¬å¼

### çº¿æ€§æŠ˜æ—§æ¨¡å‹

```
æ—¥å‡æ¶ˆè€— = æ€»æˆæœ¬ / æ€»å¤©æ•°
å·²ä½¿ç”¨ä»·å€¼ = æ—¥å‡æ¶ˆè€— Ã— å·²ä½¿ç”¨å¤©æ•°
å‰©ä½™å¤©æ•° = æ€»å¤©æ•° - å·²ä½¿ç”¨å¤©æ•°
å‰©ä½™ä»·å€¼ = æ—¥å‡æ¶ˆè€— Ã— å‰©ä½™å¤©æ•°
ä½¿ç”¨ç‡ = (å·²ä½¿ç”¨å¤©æ•° / æ€»å¤©æ•°) Ã— 100%
```

### ç¤ºä¾‹è®¡ç®—

å‡è®¾è´­ä¹°äº†ä¸€å°å¹´ä»˜ 365 å…ƒçš„ VPSï¼Œè´­ä¹°æ—¥æœŸä¸º 2025-01-01ï¼Œä»Šå¤©æ˜¯ 2025-04-11ï¼ˆå·²ä½¿ç”¨ 100 å¤©ï¼‰ï¼š

```
æ—¥å‡æ¶ˆè€— = 365 / 365 = 1 å…ƒ/å¤©
å·²ä½¿ç”¨ä»·å€¼ = 1 Ã— 100 = 100 å…ƒ
å‰©ä½™å¤©æ•° = 365 - 100 = 265 å¤©
å‰©ä½™ä»·å€¼ = 1 Ã— 265 = 265 å…ƒ
ä½¿ç”¨ç‡ = (100 / 365) Ã— 100% = 27.4%
```

## ğŸ§ª å¼€å‘ä¸æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç›‘å¬æ–‡ä»¶å˜åŒ–
npm run test:watch
```

### æµ‹è¯•è¦†ç›–ç‡

å½“å‰æµ‹è¯•è¦†ç›–ç‡ï¼š**100%**

```
File           | % Stmts | % Branch | % Funcs | % Lines
---------------|---------|----------|---------|--------
All files      |     100 |      100 |     100 |     100
calculator.js  |     100 |      100 |     100 |     100
```

### å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰

```bash
npm run dev
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
vps-å‰©ä½™ä»·å€¼è®¡ç®—/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.js          # Express æœåŠ¡å™¨ï¼ˆä¸»å…¥å£ï¼‰
â”‚   â”œâ”€â”€ calculator.js      # ä»·å€¼è®¡ç®—æ ¸å¿ƒé€»è¾‘
â”‚   â””â”€â”€ index.html         # å‰ç«¯å•é¡µé¢ï¼ˆè‡ªåŒ…å«ï¼‰
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ calculator.test.js # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ api.test.js        # é›†æˆæµ‹è¯•
â”œâ”€â”€ Dockerfile             # Docker é•œåƒæ„å»ºæ–‡ä»¶
â”œâ”€â”€ docker-compose.yml     # Docker Compose é…ç½®
â”œâ”€â”€ .dockerignore          # Docker å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ package.json           # ä¾èµ–ç®¡ç†
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ”§ æŠ€æœ¯æ ˆ

- **åç«¯**ï¼šNode.js 18+ / Express 4.18
- **å‰ç«¯**ï¼šåŸç”Ÿ HTML/CSS/JavaScriptï¼ˆæ— éœ€æ„å»ºå·¥å…·ï¼‰
- **æµ‹è¯•**ï¼šJest 29.7 / Supertest 6.3
- **å®¹å™¨åŒ–**ï¼šDocker / Docker Compose
- **åŸºç¡€é•œåƒ**ï¼šnode:18-alpineï¼ˆçº¦ 50MBï¼‰

## ğŸ› æ•…éšœæ’æŸ¥

### ç«¯å£å·²è¢«å ç”¨

å¦‚æœç«¯å£ 3000 å·²è¢«å ç”¨ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æŒ‡å®šå…¶ä»–ç«¯å£ï¼š

```bash
# æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œ
PORT=8080 npm start

# æ–¹å¼äºŒï¼šDocker è¿è¡Œ
docker run -d -p 8080:3000 -e PORT=3000 vps-calculator:latest

# æ–¹å¼ä¸‰ï¼šä¿®æ”¹ docker-compose.yml
services:
  vps-calculator:
    ports:
      - "8080:3000"
```

### Docker å¥åº·æ£€æŸ¥å¤±è´¥

æŸ¥çœ‹å®¹å™¨å¥åº·çŠ¶æ€ï¼š

```bash
docker inspect --format='{{json .State.Health}}' vps-calculator
```

æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š

```bash
docker logs vps-calculator
```

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues è”ç³»ã€‚

---

**å¼€å‘æ—¶é—´**ï¼š2026-01-11
**ç‰ˆæœ¬**ï¼šv1.0.0
**æµ‹è¯•è¦†ç›–ç‡**ï¼š100%
